{"version":3,"file":"index.js","sources":["../index.js"],"sourcesContent":["const axios = require(\"axios\");\n\nconst getSingleStockInfo = (stock) =>\n  new Promise((resolve, reject) => {\n    if (!stock) {\n      return reject(Error(\"Stock symbol required\"));\n    }\n    if (typeof stock !== \"string\") {\n      return reject(\n        Error(`Invalid argument type. Required: string. Found: ${typeof stock}`)\n      );\n    }\n\n    const url = `https://query1.finance.yahoo.com/v7/finance/quote?symbols=${stock}`;\n\n    return axios\n      .get(url, {\n        mode: \"no-cors\",\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Content-Type\": \"application/json\",\n        },\n        withCredentials: true,\n        credentials: \"same-origin\",\n      })\n      .then((res) => {\n        const { data } = res;\n        if (\n          !data ||\n          !data.quoteResponse ||\n          !data.quoteResponse.result ||\n          data.quoteResponse.result.length === 0\n        ) {\n          return reject(Error(`Error retrieving info for symbol ${stock}`));\n        }\n        return resolve(data.quoteResponse.result[0]);\n      })\n      .catch((err) => reject(err));\n  });\n\nconst getStocksInfo = (stockList) =>\n  new Promise((resolve, reject) => {\n    if (!stockList) {\n      return reject(Error(\"Stock symbol list required\"));\n    }\n    if (!Array.isArray(stockList)) {\n      return reject(Error(\"Invalid argument type. Array required.\"));\n    }\n\n    const list = [...stockList];\n    if (!list.length || list.length < 1) {\n      return Promise.resolve([]);\n    }\n\n    const promises = list.map(getSingleStockInfo);\n    return resolve(Promise.all(promises));\n  });\n\nmodule.exports = {\n  getSingleStockInfo,\n  getStocksInfo,\n};\n"],"names":["axios","require","getSingleStockInfo","stock","Promise","resolve","reject","Error","get","mode","headers","withCredentials","credentials","then","res","data","quoteResponse","result","length","err","module","exports","getStocksInfo","stockList","Array","isArray","list","promises","map","all"],"mappings":"AAAA,IAAMA,EAAQC,QAAQ,SAEhBC,EAAqB,SAACC,cACtBC,QAAQ,SAACC,EAASC,GACpB,OAAKH,EAGgB,iBAAVA,EACFG,EACLC,gEAAgEJ,IAM7DH,EACJQ,iEAHsEL,EAG7D,CACRM,KAAM,UACNC,QAAS,CACP,8BAA+B,IAC/B,eAAgB,oBAElBC,iBAAiB,EACjBC,YAAa,gBAEdC,KAAK,SAACC,GACL,IAAQC,EAASD,EAATC,KACR,OACGA,GACAA,EAAKC,eACLD,EAAKC,cAAcC,QACiB,IAArCF,EAAKC,cAAcC,OAAOC,OAIrBb,EAAQU,EAAKC,cAAcC,OAAO,IAFhCX,EAAOC,0CAA0CJ,YAIrD,SAACgB,UAAQb,EAAOa,KAhChBb,EAAOC,MAAM,6BAqD1Ba,OAAOC,QAAU,CACfnB,mBAAAA,EACAoB,cApBoB,SAACC,cACjBnB,QAAQ,SAACC,EAASC,GACpB,IAAKiB,EACH,OAAOjB,EAAOC,MAAM,+BAEtB,IAAKiB,MAAMC,QAAQF,GACjB,OAAOjB,EAAOC,MAAM,2CAGtB,IAAMmB,YAAWH,GACjB,IAAKG,EAAKR,QAAUQ,EAAKR,OAAS,EAChC,OAAOd,QAAQC,QAAQ,IAGzB,IAAMsB,EAAWD,EAAKE,IAAI1B,GAC1B,OAAOG,EAAQD,QAAQyB,IAAIF"}